<!doctype html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8">
    <title>Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±ÙŠØ© | Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: system-ui, -apple-system, "Tajawal", Arial;
            margin: 24px;
            color: #111;
        }

        .box {
            border: 1px solid #ddd;
            border-radius: 16px;
            padding: 18px;
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            margin: 0 0 10px;
            font-size: 22px;
        }

        .muted {
            color: #666;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .card {
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 12px;
        }

        .k {
            font-weight: 800;
            margin-bottom: 6px;
        }

        .badge {
            display: inline-block;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid #ddd;
            margin: 4px 6px 0 0;
        }

        @media print {
            button {
                display: none;
            }

            body {
                margin: 0;
            }

            .box {
                border: none;
            }
        }
    </style>
</head>

<body>
    <div class="box">
        <button onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø© / Ø­ÙØ¸ PDF</button>
        <h1>Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±ÙŠØ© (Ù†Ù…ÙˆØ°Ø¬ Ø¯Ø§Ø®Ù„ÙŠ)</h1>
        <div class="muted" id="ts">â€”</div>

        <div class="grid">
            <div class="card">
                <div class="k">Ø§Ù„Ø§Ø³Ù…</div>
                <div id="name">â€”</div>
            </div>
            <div class="card">
                <div class="k">Ø§Ù„Ø¬Ù‡Ø©</div>
                <div id="org">â€”</div>
            </div>
            <div class="card">
                <div class="k">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©/Ø§Ù„Ù‚Ø³Ù…</div>
                <div id="dept">â€”</div>
            </div>

            <div class="card">
                <div class="k">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
                <div id="lvl">â€”</div>
            </div>
            <div class="card">
                <div class="k">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <div id="pts">â€”</div>
            </div>
            <div class="card">
                <div class="k">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</div>
                <div id="stats">â€”</div>
            </div>
        </div>

        <h3>Ø§Ù„Ø´Ø§Ø±Ø§Øª</h3>
        <div id="badges"></div>

        <p class="muted" style="margin-top:14px;">Ù‡Ø°Ù‡ ÙˆØ«ÙŠÙ‚Ø© Ø¯Ø§Ø®Ù„ÙŠØ© Ø¯Ø§Ø¹Ù…Ø© Ù„Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±ÙŠ (Demo).</p>
    </div>

    <script>
        (() => {
            const fmt = (n) => new Intl.NumberFormat("ar-SA").format(n || 0);
            const payload = JSON.parse(localStorage.getItem("is_employee_print_v1") || "null");
            if (!payload) { document.body.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø·Ø§Ù‚Ø© Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©.</p>"; return; }

            document.getElementById("ts").textContent = "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: " + (payload.ts || "");
            document.getElementById("name").textContent = payload.me?.displayName || "â€”";
            document.getElementById("org").textContent = payload.org?.nameAr || "â€”";
            document.getElementById("dept").textContent = payload.me?.dept || "â€”";
            document.getElementById("lvl").textContent = payload.level || "â€”";
            document.getElementById("pts").textContent = fmt(payload.points);

            const s = payload.stats || {};
            document.getElementById("stats").textContent =
                `Ù…Ø¨Ø§Ø¯Ø±Ø§Øª: ${fmt(s.total)} â€¢ Ù…Ø¹ØªÙ…Ø¯Ø©: ${fmt(s.wins)} â€¢ ØªØ­ÙƒÙŠÙ…: ${fmt(s.review)} â€¢ Ø£Ø«Ø±: ${fmt(s.impact)}`;

            const b = payload.badges || [];
            document.getElementById("badges").innerHTML = b.length ? b.map(x => `<span class="badge">ğŸ… ${x.t}</span>`).join("") : "â€”";
        })();
    </script>
</body>

</html>