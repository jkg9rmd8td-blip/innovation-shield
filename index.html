<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>ุฏุฑุน ุงูุงุจุชูุงุฑ | ูุฑูุฒ ุงูููุงุฏุฉ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="assets/css/app.css" />
</head>

<body class="career-body">
  <a class="skip-link" href="#mainContent">ุชุฎุทู ุฅูู ุงููุญุชูู ุงูุฑุฆูุณู</a>

  <!-- Background Mesh -->
  <div class="platform-bg" aria-hidden="true">
    <div class="mesh mesh-1"></div>
    <div class="mesh mesh-2"></div>
    <div class="mesh mesh-3"></div>
  </div>

  <main class="platform-shell" id="mainContent" tabindex="-1">

    <!-- ================== TOPBAR ================== -->
    <header class="platform-topbar reveal">
      <div class="topbar-brand">
        <div class="brand-mark" aria-label="Innovation Shield">IS</div>
        <div>
          <h1 class="topbar-title">ุฏุฑุน ุงูุงุจุชูุงุฑ</h1>
          <p class="topbar-sub" data-i18n="topbar_sub">ุญุฑูุฉ ุงุจุชูุงุฑ + ุชุญุฏูุงุช ูุงูุนูุฉ + AI ูุณุงุนุฏ + ุชุญููู ุนุงุฏู</p>
        </div>
      </div>

      <nav class="nav" aria-label="ุงูุชููู ุงูุฑุฆูุณู">
        <a href="index.html" class="active">ุงูุฑุฆูุณูุฉ</a>
        <a href="app/map/index.html">ุฎุฑูุทุฉ ุงูุงุจุชูุงุฑ</a>
        <a href="app/prototype/index.html">ุงูููุงุฐุฌ ุงูุฃูููุฉ</a>
        <a href="app/employee/index.html">ูุณุงุฑ ุงูููุธู</a>
        <a href="app/judging/index.html">ุงูุชุญููู</a>
        <a href="app/command/index.html">ููุญุฉ ุงูููุงุฏุฉ</a>
        <a href="app/policies/index.html">ุงูุณูุงุณุงุช</a>
        <a href="app/report/index.html">ุงูุชูุฑูุฑ ุงูุชูููุฐู</a>
        <a href="app/about/index.html">ุนู ุงูููุตุฉ</a>
      </nav>

      <div class="topbar-actions">
        <span class="live-pill" data-i18n="system_active">๐ข ูุธุงู ูุดุท</span>
        <button class="btn btn-ghost" id="langToggle" aria-label="ุชุจุฏูู ุงููุบุฉ">EN</button>
        <div class="hero-actions">
          <button class="btn btn-primary" data-go="app/map/index.html" data-i18n="start_initiative">ุจุฏุก ูุจุงุฏุฑุฉ</button>
          <button class="btn btn-soft" data-go="app/employee/index.html" data-i18n="my_profile">ูููู ุงูุงุจุชูุงุฑู</button>
          <button class="btn btn-ghost" data-go="app/about/index.html">ุนู ุงูููุตุฉ</button>
        </div>
      </div>
    </header>

    <!-- ================== HERO ================== -->
    <section class="workspace-banner reveal">
      <div>
        <span class="eyebrow" data-i18n="command_center">ูุฑูุฒ ุงูููุงุฏุฉ</span>
        <h2 class="hero-title" data-i18n="hero_title">
          ููุตุฉ ุชููุญ ุงูููุธููู ุญุฑูุฉ ุงุจุชูุงุฑ ุงูุญููู ูุชุฑุจุทูู ุจุชุญุฏูุงุช ุญููููุฉ ุฏุงุฎู ุงูุชุฌูุน
        </h2>
        <p class="hero-sub" data-i18n="hero_sub">
          ุงุจุชูุฑ ุญููููุง ุชุฎุฏู ุงูููุธู ุฃู ุงููุฑูุถ ุฃู ุงูุชุดุบูู ุฃู ุงูุฌูุฏุฉ ุฃู ุงูุชูููุฉ ุฃู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉุ
          ุฃู ุงุฎุชุฑ ูู ุงูุชุญุฏูุงุช ุงููุงูุนูุฉ ุงููุนุฑูุถุฉ ูุชูุงูุณ ุนูู ุฃูุถู ุญูุ
          ุซู ุงุณุชุฎุฏู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุจูุงุก ุงูููุฑุฉ ูุงุฏุฎู ุงูุชุญููู ุงูุจุดุฑู ูุถูุงู ุงูุนุฏุงูุฉ ูุงูุฌูุฏุฉ.
        </p>
      </div>

      <div class="quality-pill" data-i18n="institutional_readiness">
        โก ุฌุงูุฒูุฉ ุงูุงุจุชูุงุฑ ุงููุคุณุณู
      </div>
    </section>

    <!-- ================== KPIs ================== -->
    <section class="stats-grid reveal" aria-label="ูุคุดุฑุงุช ุงูุฃุฏุงุก">
      <div class="stat-card">
        <p>ุงููุจุชูุฑูู ุงููุดุทูู</p>
        <h3 data-kpi="innovators">0</h3>
      </div>

      <div class="stat-card">
        <p>ุงููุจุงุฏุฑุงุช ุงููุณุฌูุฉ</p>
        <h3 data-kpi="initiatives">0</h3>
      </div>

      <div class="stat-card">
        <p>ุงูููุงุฐุฌ ุงูุฃูููุฉ</p>
        <h3 data-kpi="prototypes">0</h3>
      </div>

      <div class="stat-card">
        <p>ุงููุจุงุฏุฑุงุช ุงููุนุชูุฏุฉ</p>
        <h3 data-kpi="approved">0</h3>
      </div>

      <div class="stat-card">
        <p>ูุณุจุฉ ุงูุงุนุชูุงุฏ</p>
        <h3 data-kpi="approvalRate">0%</h3>
      </div>

      <div class="stat-card">
        <p>ูุคุดุฑ ุงูุชูุงุนู</p>
        <h3 data-kpi="engagement">0</h3>
      </div>
    </section>

    <!-- ================== QUICK ACCESS ================== -->
    <section class="workspace-grid reveal">

      <div class="panel">
        <div class="panel-head">
          <h3>๐ ูุณุงุฑุงุช ุงูููุตุฉ</h3>
        </div>

        <div class="badge-list">
          <span class="badge-pill" data-go="app/map/index.html">ุฎุฑูุทุฉ ุงูุงุจุชูุงุฑ</span>
          <span class="badge-pill" data-go="app/prototype/index.html">ูุฑูุฒ ุงูููุงุฐุฌ</span>
          <span class="badge-pill" data-go="app/employee/index.html">ูุณุงุญุฉ ุงููุจุชูุฑ</span>
          <span class="badge-pill" data-go="app/judging/index.html">ูุธุงู ุงูุชุญููู</span>
          <span class="badge-pill" data-go="app/command/index.html">ููุญุฉ ุงูููุงุฏุฉ</span>
          <span class="badge-pill" data-go="app/policies/index.html">ุงูุญูููุฉ ูุงูุณูุงุณุงุช</span>
          <span class="badge-pill" data-go="app/report/index.html">ุงูุชูุฑูุฑ ุงูุชูููุฐู</span>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h3>๐ฏ ุฑุคูุฉ ุงูููุตุฉ</h3>
        </div>
        <ul class="insight-list" style="margin:0;">
          <li>ุงุจุชูุงุฑ ุญุฑ: ุฃู ููุธู ููุฏุฑ ูุทูู ูุจุงุฏุฑุฉ ุชุฎุฏู ุฃู ูุณุงุฑ ูุญุชุงุฌ ุชุญุณูู.</li>
          <li>ุชุญุฏูุงุช ูุงูุนูุฉ: ุงูููุตุฉ ุชุนุฑุถ ูุดุงูู ูุนููุฉ ุฏุงุฎู ุงูุชุฌูุน ููุงุฎุชูุงุฑ ูุงูุชูุงูุณ.</li>
          <li>AI Co-Pilot: ุฏุนู ุฐูู ูุตูุงุบุฉ ุงููุดููุฉ ูุงูุญู ูMVP ูุงูุฃุซุฑ.</li>
          <li>Human Judging: ุชุญููู ุจุดุฑู ุจูุนุงููุฑ ูุงุถุญุฉ ูุถูุงู ุงูุนุฏุงูุฉ ูุงูุฌูุฏุฉ.</li>
        </ul>
      </div>

    </section>

    <section class="workspace-grid reveal">
      <div class="panel">
        <div class="panel-head">
          <h3>ุนู ุงูููุตุฉ</h3>
          <span class="panel-note">ุงูุฑุคูุฉ โข ุงูุฃูุฏุงู โข ุงููุฑูู</span>
        </div>
        <ul class="insight-list" style="margin:0;">
          <li>ุงูุฑุคูุฉ: ุชุญููู ุฃููุงุฑ ุงูููุธููู ุฅูู ุญููู ูุทุจููุฉ ุชุฑูุน ุฌูุฏุฉ ุงูุฎุฏูุฉ ุงูุตุญูุฉ.</li>
          <li>ุงูุฃูุฏุงู: ุชูููู ุฒูู ุงูุชููููุ ุฑูุน ุฌูุฏุฉ ุงููุจุงุฏุฑุงุชุ ูุฒูุงุฏุฉ ุงูุงุนุชูุงุฏ ุงููุนูู.</li>
          <li>ุงููุฑูู: ูุจุชูุฑููุ ูุญูููููุ ูุฑู ุชุดุบููุ ุฏุนู ุชูููุ ูุญูููุฉ ูุคุณุณูุฉ.</li>
          <li>ุงูุตูุญุฉ ุงูุชูุตูููุฉ: <button class="btn btn-soft sm" data-go="app/about/index.html">ูุชุญ ุตูุญุฉ ุงูุชุนุฑูู</button></li>
        </ul>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h3>ุญุงูุฉ ุงูุฃูุงู ูุงูุฃุฏุงุก</h3>
          <span class="panel-note" id="perfStamp">ููุงุณ ุงูุชุญููู ููุฏ ุงูุชุญุฏูุซ...</span>
        </div>
        <ul class="insight-list" id="securityList" style="margin:0;"></ul>
      </div>
    </section>

    <section class="workspace-grid reveal">
      <div class="panel">
        <div class="panel-head">
          <h3>ูุตุต ูุฌุงุญ</h3>
          <span class="panel-note">ูุจุงุฏุฑุงุช ูุทุจููุฉ ุฃู ูุนุชูุฏุฉ ุฐุงุช ุฃุซุฑ ูุนูู</span>
        </div>
        <ul class="insight-list" id="successList" style="margin:0;"></ul>
      </div>
      <div class="panel">
        <div class="panel-head">
          <h3>ุงูุฃููุงุฑ ุงูุฃูุซุฑ ุชูุงุนููุง</h3>
          <span class="panel-note">ุชุตููุช + ุชุนูููุงุช</span>
        </div>
        <ul class="insight-list" id="interactionList" style="margin:0;"></ul>
      </div>
    </section>

  </main>

  <div class="modal hidden" id="homeOnboarding" role="dialog" aria-modal="true" aria-labelledby="onbTitle">
    <div class="modal-backdrop" data-close-onb></div>
    <div class="modal-card" style="max-width:720px; width:min(720px, calc(100vw - 24px));">
      <div class="mhead">
        <div class="mtitle" id="onbTitle">ูุฑุญุจูุง ุจู ูู ุฏุฑุน ุงูุงุจุชูุงุฑ</div>
        <button class="btn btn-ghost" data-close-onb>ุฅุบูุงู</button>
      </div>
      <div class="panel" style="margin:0;">
        <div class="panel-head">
          <h3>ุงุจุฏุฃ ูู 3 ุฎุทูุงุช</h3>
          <span class="panel-note">ุฑุญูุฉ ูุฎุชุตุฑุฉ ูููุณุชุฎุฏู ุงูุฌุฏูุฏ</span>
        </div>
        <ol class="insight-list" style="margin:0;">
          <li>ุงูุชุญ <strong>ุฎุฑูุทุฉ ุงูุงุจุชูุงุฑ</strong> ูุงุฎุชุฑ ููุฑุฉ ุฌุฏูุฏุฉ ุฃู ุชุญุฏููุง ูุงูุนููุง.</li>
          <li>ุงุณุชุฎุฏู ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุตูุงุบุฉ ุงููุดููุฉ ูุงูุญู ุจุณุฑุนุฉ.</li>
          <li>ุฃุฑุณู ุงููุจุงุฏุฑุฉ ููุชุญููู ูุชุงุจุน ุฃุซุฑูุง ูู ููุญุฉ ุงูููุงุฏุฉ.</li>
        </ol>
      </div>
      <div class="mfoot">
        <div class="mtext">ููููู ุฅุนุงุฏุฉ ูุฐุง ุงูุฏููู ูุงุญููุง ูู ุฒุฑ "ุงููุณุงุนุฏุฉ".</div>
        <button class="btn btn-soft" id="onbGoMap">ุงูุชุญ ุฎุฑูุทุฉ ุงูุงุจุชูุงุฑ</button>
        <button class="btn btn-primary" id="onbStartNow">ุงุจุฏุฃ ุงูุขู</button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="assets/js/app.js"></script>
  <script>
    (() => {
      "use strict";
      const IS = window.IS;
      if (!IS) return;

      const ONBOARDING_KEY = "is_home_onboarded_v2";
      const $ = (s, r = document) => r.querySelector(s);
      const fmt = (n) => new Intl.NumberFormat("ar-SA").format(Number(n || 0));

      const I18N = {
        ar: {
          topbar_sub: "ุญุฑูุฉ ุงุจุชูุงุฑ + ุชุญุฏูุงุช ูุงูุนูุฉ + AI ูุณุงุนุฏ + ุชุญููู ุนุงุฏู",
          system_active: "๐ข ูุธุงู ูุดุท",
          start_initiative: "ุจุฏุก ูุจุงุฏุฑุฉ",
          my_profile: "ูููู ุงูุงุจุชูุงุฑู",
          command_center: "ูุฑูุฒ ุงูููุงุฏุฉ",
          hero_title: "ููุตุฉ ุชููุญ ุงูููุธููู ุญุฑูุฉ ุงุจุชูุงุฑ ุงูุญููู ูุชุฑุจุทูู ุจุชุญุฏูุงุช ุญููููุฉ ุฏุงุฎู ุงูุชุฌูุน",
          hero_sub: "ุงุจุชูุฑ ุญููููุง ุชุฎุฏู ุงูููุธู ุฃู ุงููุฑูุถ ุฃู ุงูุชุดุบูู ุฃู ุงูุฌูุฏุฉ ุฃู ุงูุชูููุฉ ุฃู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉุ ุฃู ุงุฎุชุฑ ูู ุงูุชุญุฏูุงุช ุงููุงูุนูุฉ ุงููุนุฑูุถุฉ ูุชูุงูุณ ุนูู ุฃูุถู ุญูุ ุซู ุงุณุชุฎุฏู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุจูุงุก ุงูููุฑุฉ ูุงุฏุฎู ุงูุชุญููู ุงูุจุดุฑู ูุถูุงู ุงูุนุฏุงูุฉ ูุงูุฌูุฏุฉ.",
          institutional_readiness: "โก ุฌุงูุฒูุฉ ุงูุงุจุชูุงุฑ ุงููุคุณุณู"
        },
        en: {
          topbar_sub: "Open Innovation + Real Challenges + AI CoโPilot + Fair Judging",
          system_active: "๐ข System Active",
          start_initiative: "Start Initiative",
          my_profile: "My Innovation Profile",
          command_center: "Command Center",
          hero_title: "A platform that empowers employees to innovate and solve real health-cluster challenges",
          hero_sub: "Build ideas for employee, patient, operations, quality, technology, or HR; select real internal challenges; use AI to draft solutions; then move to human judging for fairness and quality.",
          institutional_readiness: "โก Institutional Innovation Readiness"
        }
      };

      const go = (path) => {
        if (!path) return;
        window.location.href = path;
      };

      const inis = IS.state.initiatives || [];
      const teams = IS.state.teams || [];
      const members = new Set();
      teams.forEach((t) => (t.members || []).forEach((m) => members.add(m.id || m.name)));

      const approvedCount = inis.filter((i) => ["ูุนุชูุฏ", "ูุทุจู"].includes(i.status) || ["ุงูุงุนุชูุงุฏ", "ุงูุชุทุจูู"].includes(i.stage)).length;
      const interactionScore = (i) => {
        const up = Math.max(0, Number(i.engagement?.upvotes || 0));
        const down = Math.max(0, Number(i.engagement?.downvotes || 0));
        const comments = Array.isArray(i.comments) ? i.comments.length : 0;
        return Math.max(0, (up * 2) - down + (comments * 3));
      };

      const totalEngagement = inis.reduce((sum, i) => sum + interactionScore(i), 0);
      const approvalRate = inis.length ? Math.round((approvedCount / inis.length) * 100) : 0;

      const kpi = {
        innovators: Math.max(1, members.size || 0),
        initiatives: inis.length,
        prototypes: inis.filter((i) => !!i.prototype || i.stage === "ุงููููุฐุฌ ุงูุฃููู").length,
        approved: approvedCount,
        approvalRate: `${fmt(approvalRate)}%`,
        engagement: fmt(totalEngagement)
      };

      Object.entries(kpi).forEach(([key, value]) => {
        const node = document.querySelector(`[data-kpi="${key}"]`);
        if (node) node.textContent = value;
      });

      const successRows = [...inis]
        .filter((i) => ["ูุนุชูุฏ", "ูุทุจู"].includes(i.status) || ["ุงูุงุนุชูุงุฏ", "ุงูุชุทุจูู"].includes(i.stage))
        .sort((a, b) => Number(b.impact?.costSaving || 0) - Number(a.impact?.costSaving || 0))
        .slice(0, 3);
      $("#successList").innerHTML = successRows.length ? successRows.map((i) => `
        <li>
          <strong>${i.id} โ ${i.title}</strong>
          <span class="status-badge is-good">${i.status || i.stage}</span>
          <div>ุฃุซุฑ ุณููู ูุชููุน: ${fmt(i.impact?.costSaving || 0)} ุฑูุงู</div>
        </li>
      `).join("") : `<li>ูุง ุชูุฌุฏ ูุตุต ูุฌุงุญ ุจุนุฏุ ุงุจุฏุฃ ุฃูู ูุจุงุฏุฑุฉ ุงูุขู.</li>`;

      const topInteraction = [...inis].sort((a, b) => interactionScore(b) - interactionScore(a)).slice(0, 3);
      $("#interactionList").innerHTML = topInteraction.length ? topInteraction.map((i) => `
        <li>
          <strong>${i.id} โ ${i.title}</strong>
          <div>ุงูุชูุงุนู: ${fmt(interactionScore(i))} ููุทุฉ โข ุชุนูููุงุช: ${fmt((i.comments || []).length)} โข ุชุตููุช: +${fmt(i.engagement?.upvotes || 0)}</div>
        </li>
      `).join("") : `<li>ูุง ุชูุฌุฏ ูุจุงุฏุฑุงุช ูุงููุฉ ูููุงุณ ุงูุชูุงุนู ุจุนุฏ.</li>`;

      const policyAccepted = IS.ensurePolicyAccepted();
      const perfMs = (() => {
        const nav = performance.getEntriesByType("navigation")[0];
        if (nav && Number.isFinite(nav.domContentLoadedEventEnd)) return Math.round(nav.domContentLoadedEventEnd);
        return Math.round(performance.now());
      })();
      $("#perfStamp").textContent = `ุฌุงูุฒูุฉ ุงููุงุฌูุฉ: ${fmt(perfMs)}ms โข ูุชุฌุงูุจุฉ ููุฌูุงู`;
      $("#securityList").innerHTML = `
        <li>RBAC + ุณุฌู ุชุฏููู: <span class="status-badge is-good">ููุนูู</span></li>
        <li>ุชุนูุฏ ุงูุณุฑูุฉ (NDA): <span class="status-badge ${policyAccepted ? "is-good" : "is-mid"}">${policyAccepted ? "ููุจูู" : "ุจุงูุชุธุงุฑ ุงููุจูู"}</span></li>
        <li>ุนุฏุฏ ุฃุญุฏุงุซ ุงูุชุฏููู ุงูุญุงููุฉ: <strong>${fmt((IS.state.audit || []).length)}</strong></li>
        <li>ุนูุฏ ุงููุดุฑ ุนูู GitHub Pages ููุตู ุจุชูุนูู HTTPS ููุท ููููุฏ ุตูุงุญูุงุช API.</li>
      `;

      function applyLanguage(lang) {
        const dictionary = I18N[lang] || I18N.ar;
        document.documentElement.lang = lang === "en" ? "en" : "ar";
        document.documentElement.dir = lang === "en" ? "ltr" : "rtl";
        Object.entries(dictionary).forEach(([key, value]) => {
          const node = document.querySelector(`[data-i18n="${key}"]`);
          if (node) node.textContent = value;
        });
        const toggle = $("#langToggle");
        if (toggle) toggle.textContent = lang === "en" ? "AR" : "EN";
        IS.state.preferences = IS.state.preferences || {};
        IS.state.preferences.language = lang;
        IS.state.preferences.rtl = lang !== "en";
        IS.save();
      }

      const langPref = String(IS.state.preferences?.language || "ar").toLowerCase();
      applyLanguage(langPref === "en" ? "en" : "ar");

      $("#langToggle").addEventListener("click", () => {
        const next = document.documentElement.lang === "en" ? "ar" : "en";
        applyLanguage(next);
      });

      document.querySelectorAll("[data-go]").forEach((el) => {
        el.addEventListener("click", () => go(el.getAttribute("data-go")));
      });

      const openOnboarding = () => $("#homeOnboarding").classList.remove("hidden");
      const closeOnboarding = () => $("#homeOnboarding").classList.add("hidden");

      if (!localStorage.getItem(ONBOARDING_KEY)) openOnboarding();
      document.querySelectorAll("[data-close-onb]").forEach((el) => {
        el.addEventListener("click", () => {
          localStorage.setItem(ONBOARDING_KEY, "1");
          closeOnboarding();
        });
      });

      $("#onbStartNow").addEventListener("click", () => {
        localStorage.setItem(ONBOARDING_KEY, "1");
        closeOnboarding();
      });
      $("#onbGoMap").addEventListener("click", () => {
        localStorage.setItem(ONBOARDING_KEY, "1");
        go("app/map/index.html");
      });

      IS.audit("ูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ", "home");
      IS.save();
    })();
  </script>

</body>

</html>
